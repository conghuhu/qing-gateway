(self.webpackChunk_ice_lite_scaffold=self.webpackChunk_ice_lite_scaffold||[]).push([[564],{4986:function(e){e.exports={headContainer:"headContainer--W3XSuanu",button:"button--WZdCuMLa"}},2748:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return w}});var r=n(8208),i=n(6344),u=n(1913),c=n(6393),o=n(1194),l=n(5859),s=n(6720),a=n(2450),d=n(999),f=n(2885),Z=n(6747),h=n(8826),m=n(1080),p=n(7520),g=n(3814),y=n(7407),b=n(4193),k=n(5575),q=n(1503),v=n(959),W=n(9699),R=n(4986),I=n.n(R),Y=s.Z.Search,S=function(e){var t=e.setVisible,n=e.refreshData,i=(0,c.Z)((0,v.useState)("ip"),2),u=i[0],h=i[1],m=(0,c.Z)((0,v.useState)("\u79D2"),2),p=m[0],g=m[1],y=(0,c.Z)(a.Z.useForm(),1)[0],b=(0,q.QT)(W.Aw),k=b.loading,R=b.request;return(0,l.tZ)(d.Z,{title:"\u6DFB\u52A0\u9650\u6D41\u89C4\u5219",open:!0,okText:"\u786E\u8BA4\u6DFB\u52A0",cancelText:"\u53D6\u6D88",onCancel:function(){return t(!1)},onOk:(0,r.Z)(function(){return(0,o.Jh)(this,function(e){var i;return y.validateFields().then((i=(0,r.Z)(function(e){return(0,o.Jh)(this,function(r){switch(r.label){case 0:return console.log(e),[4,R(e)];case 1:return r.sent(),[4,n()];case 2:return r.sent(),t(!1),[2]}})}),function(e){return i.apply(this,arguments)})),[2]})}),confirmLoading:k,children:(0,l.BX)(a.Z,{layout:"vertical",labelAlign:"right",form:y,children:[(0,l.tZ)(a.Z.Item,{label:"\u7C7B\u578B\u9009\u62E9",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],initialValue:u,children:(0,l.tZ)(f.Z,{onSelect:function(e){h(e)},children:[{id:1,type:"ip"},{id:2,type:"interface"}].map(function(e){return(0,l.tZ)(f.Z.Option,{value:e.type},e.id)})})}),(0,l.tZ)(a.Z.Item,{label:"ip"===u?"\u9650\u5236ip":"\u9650\u5236\u63A5\u53E3",name:"limitKey",rules:[{required:!0,message:"\u8BF7\u8F93\u5165key"}],children:(0,l.tZ)(s.Z,{})}),(0,l.tZ)(a.Z.Item,{label:"\u9650\u6D41\u65F6\u95F4\u7EA7",name:"timeunit",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5355\u4F4D"}],children:(0,l.tZ)(f.Z,{onSelect:function(e){console.log(e),g(e)},children:[{id:1,timeunit:"second"},{id:2,timeunit:"minute"}].map(function(e){return(0,l.tZ)(f.Z.Option,{value:e.timeunit,children:"second"===e.timeunit?"\u79D2":"\u5206"},e.id)})})}),(0,l.tZ)(a.Z.Item,{label:"second"===p?"qps":"qpm",name:"second"===p?"qps":"qpm",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u9650\u5236\u91CF\uFF01"}],children:(0,l.tZ)(Z.Z,{style:{width:"100%"}})})]})})},L=function(e){var t=e.currentRecord,n=e.setEditVisible,m=e.refresh,p=(0,c.Z)((0,v.useState)(""),2),g=p[0],y=p[1],b=(0,q.QT)(W.n3),k=b.loading,R=b.request,I=(0,c.Z)(a.Z.useForm(),1)[0];return(0,v.useEffect)(function(){I.setFieldsValue((0,i.Z)({},t))},[]),(0,l.tZ)(d.Z,{title:"\u66F4\u6539\u9650\u6D41\u89C4\u5219",visible:!0,okText:"\u66F4\u6539",cancelText:"\u53D6\u6D88",onCancel:function(){return n(!1)},confirmLoading:k,onOk:(0,r.Z)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,R((0,u.Z)((0,i.Z)({},I.getFieldsValue()),{id:t.id}))];case 1:return e.sent(),h.ZP.success("\u66F4\u65B0\u8DEF\u7531\u89C4\u5219\u6210\u529F"),[4,m()];case 2:return e.sent(),n(!1),[2]}})}),mask:!0,children:(0,l.BX)(a.Z,{layout:"vertical",labelAlign:"right",form:I,children:[(0,l.tZ)(a.Z.Item,{label:"\u9009\u62E9\u9650\u6D41\u7C7B\u578B",name:"type",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9650\u6D41\u7C7B\u578B"}],children:(0,l.tZ)(f.Z,{children:[{id:1,type:"ip"},{id:2,type:"interface"}].map(function(e){return(0,l.tZ)(f.Z.Option,{value:e.type},e.id)})})}),(0,l.tZ)(a.Z.Item,{label:"key",name:"limitKey",rules:[{required:!0,message:"\u8BF7\u8F93\u5165key"}],children:(0,l.tZ)(s.Z,{})}),(0,l.tZ)(a.Z.Item,{label:"\u9650\u6D41\u65F6\u95F4\u7EA7",name:"timeunit",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9650\u6D41\u65F6\u95F4\u7EA7"}],children:(0,l.tZ)(f.Z,{onSelect:function(e){y(e)},children:[{id:1,timeunit:"second"},{id:2,timeunit:"minute"}].map(function(e){return(0,l.tZ)(f.Z.Option,{value:e.timeunit,children:"second"===e.timeunit?"\u79D2":"\u5206"},e.id)})})}),(0,l.tZ)(a.Z.Item,{label:"second"===g?"qps":"qpm",name:"second"===g?"qps":"qpm",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u9650\u6D41\u65F6\u95F4\u7EA7"}],children:(0,l.tZ)(Z.Z,{})})]})})};function w(){var e,t=(0,c.Z)((0,v.useState)(!1),2),n=t[0],i=t[1],u=(0,c.Z)((0,v.useState)(!1),2),s=u[0],a=u[1],d=(0,c.Z)((0,v.useState)(),2),f=d[0],Z=d[1],R=(0,q.QT)(W.d3,{onSuccess:function(e){console.log(e)}}),w=R.data,C=R.error,x=R.loading,B=R.request;(0,v.useEffect)(function(){(0,r.Z)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return[4,B()];case 1:return e.sent(),[2]}})})()},[]);var T=(0,q.QT)(W.V$,{manual:!0,onSuccess:function(e){h.ZP.success("\u5220\u9664\u6210\u529F")}}).request,V=(e=(0,r.Z)(function(e){return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,T(e.id)];case 1:return t.sent(),[4,B()];case 2:return t.sent(),[2]}})}),function(t){return e.apply(this,arguments)});return(0,l.tZ)("div",{children:C?(0,l.BX)("div",{children:["request error: ",C.message]}):(0,l.BX)("div",{children:[(0,l.BX)("div",{className:I().headContainer,children:[(0,l.tZ)(Y,{placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u540D\u6216\u8DEF\u7531\u65AD\u8A00",onSearch:function(e){return console.log(e)},style:{width:200}}),(0,l.tZ)(y.Z,{type:"primary",icon:(0,l.tZ)(k.Z,{}),onClick:function(){i(!0)},className:I().button,children:"\u65B0\u589E\u89C4\u5219"})]}),n&&(0,l.tZ)(S,{setVisible:i,refreshData:B}),(0,l.tZ)(b.Z,{columns:[{title:"\u7C7B\u578B",dataIndex:"type",key:"type",align:"center",render:function(e){return(0,l.tZ)("a",{children:e})}},{title:"key",key:"limitKey",align:"center",dataIndex:"limitKey",render:function(e){return(0,l.tZ)(m.Z,{children:e})}},{title:"\u9650\u6D41\u65F6\u95F4\u7EA7",key:"time",dataIndex:"timeunit",align:"center",render:function(e){return"second"===e?(0,l.tZ)(m.Z,{color:"blue",children:"\u79D2"}):(0,l.tZ)(m.Z,{color:"green",children:"\u5206"})}},{title:"\u6700\u5927\u8BF7\u6C42\u6570\u91CF",dataIndex:"qpm",key:"enabled",align:"center",render:function(e,t,n){return null===e?t.qps:e}},{title:"\u64CD\u4F5C",key:"action",align:"center",render:function(e,t){return(0,l.BX)(p.Z,{size:"middle",children:[(0,l.tZ)("a",{onClick:function(){Z(t),a(!0)},children:"\u7F16\u8F91"}),(0,l.tZ)(g.Z,{title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){return V(e)},children:(0,l.tZ)(y.Z,{type:"link",danger:!0,children:"\u5220\u9664"})})]})}}],dataSource:w,loading:x,rowKey:function(e){return e.id}}),s&&f&&(0,l.tZ)(L,{currentRecord:f,setEditVisible:a,refresh:B})]})})}},9699:function(e,t,n){"use strict";n.d(t,{$p:function(){return Z},Aw:function(){return y},D1:function(){return d},Jo:function(){return Y},Lv:function(){return I},MM:function(){return v},Rh:function(){return o},S1:function(){return R},V$:function(){return g},ch:function(){return h},d3:function(){return p},id:function(){return l},kM:function(){return q},mb:function(){return f},mc:function(){return L},n3:function(){return b},qM:function(){return a},r8:function(){return s},ul:function(){return k},x4:function(){return c},yr:function(){return m}});var r=n(8208),i=n(1194),u=n(1503);function c(e){return u.WY.post("/auth/login",e)}function o(){return u.WY.get("/sys/getLoadBalance")}function l(){return u.WY.get("/routeRule/getRouteRuleList")}function s(e){return u.WY.delete("/routeRule/deleteRouteRule?id=".concat(e))}function a(){return u.WY.get("/nacosInfo/getServiceList")}function d(e){return u.WY.get("/nacosInfo/getServiceInstanceList?serviceId=".concat(e))}function f(e){return u.WY.post("/routeRule/addRouteRule",e)}function Z(e){return u.WY.put("/routeRule/updateRouteRule",e)}function h(){return u.WY.get("/websocket-info/getWebsocketInfo")}function m(e){return u.WY.post("/sys/getInvokeLogs",e)}function p(){return u.WY.get("/limitRule/getLimitRuleList")}function g(e){return u.WY.delete("/limitRule/deleteLimitRule?id=".concat(e))}function y(e){return u.WY.post("/limitRule/addLimitRule",e)}function b(e){return u.WY.put("/limitRule/updateLimitRule",e)}function k(){return u.WY.get("/sys/getCurrentLoadBalance")}function q(e){return u.WY.put("/sys/changeLoadBalance?loadBalance=".concat(e))}function v(){return W.apply(this,arguments)}function W(){return(W=(0,r.Z)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,u.WY.get("/sys/queryInitStatus")];case 1:return[2,e.sent()]}})})).apply(this,arguments)}function R(e){return u.WY.post("/sys/init",e)}function I(e){return u.WY.put("/nacosInfo/updateInstance",e)}function Y(){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,u.WY.get("/sys/getCurrentConfig")];case 1:return[2,e.sent()]}})})).apply(this,arguments)}function L(e){return u.WY.post("/sys/reset",e)}}}]);